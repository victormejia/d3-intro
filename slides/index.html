<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title></title>
    <meta name="description" content="">
    <meta name="author" content="Victor Mejia">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/main.css" id="theme">

    <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:400,700' rel='stylesheet' type='text/css'>

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/prism-flatland.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h2>Interactive Data Visualization With <span class="mediumblue">D3.js</span></h2>
          <p>
            Created by <a href="http://victormejia.github.io">Victor Mejia</a>
          </p>
        </section>

        <section>
          <h2>about me</h2>
          <p>Senior UI Engineer @ Engrade (McGraw-Hill Education)</p>
          <p>I ♥ Coding and Teaching</p>
          <p>I ♥ JavaScript (Angular, Ionic, D3, Firebase)</p>
          <hr />
          <p>Tweeting <a href="https://twitter.com/_victormejia">@_victormejia</a></p>
          <p>Coding <a href="https://github.com/victormejia/">@victormejia</a></p>
          <p>Blogging @ <a href="http://victormejia.me">victormejia.me</a></p>
        </section>

        <section>
          <h1>what  is <span class="mediumblue">D3</span>?</h1>
        </section>

        <section>
          <h1><span class="mediumblue">D</span>ata</h1>
          <h1><span class="mediumblue">D</span>riven</h1>
          <h1><span class="mediumblue">D</span>ocuments</h1>
        </section>

        <section>
          <h2>Created by <a href="http://twitter.com/mbostock">Mike Bostock</a></h2>
        </section>

        <section>
          <h2>efficient manipulation of documents based on <span class="mediumblue">data</span></h2>
        </section>

        <section>
          <h3>not a just a charting library, it's so much <a href="http://mbostock.github.io/d3/talk/20111018/#24">more</a></h3>
        </section>

        <section>
          <h2>let's focus on the word <span class="mediumblue">visualization</span></a></p>
        </section>

        <section>
          <h2>check out what</h2>
          <h2>D3 can do</h2>
          <p><a href="http://mbostock.github.io/d3/talk/20111018/#24">Awesome Visualizations</a></p>
          <p><a href="https://github.com/mbostock/d3/wiki/Gallery">D3 Gallery</a></p>
        </section>

        <section>
          <h2>D3 out in the wild: </h2>
          <p><a href="https://sublime.wbond.net/packages/Emmet">Emmet Sublime Package</a></p>
          <p><a href="http://blogs.kqed.org/lowdown/2014/03/18/into-the-drought-californias-shrinking-reservoirs/">California Drought</a></p>
          <p><a href="http://vudlab.com/simpsons/">Simpson's Paradox</a></p>
          <p><a href="http://setosa.io">setosa.io</a></p>
        </section>

        <section>
          <h2>the plan (part 1)</h2>
          <ul>
            <li>svg intro</li>
            <li>selections</li>
            <li>scales</li>
            <li>axis</li>
            <li>transitions</li>
            <li>interactivity</li>
            <li>line chart</li>
            <li>bar chart</li>
          </ul>
        </section>

        <section>
          <h2>the plan (part 2)</h2>
          <ul>
            <li>scatter plot</li>
            <li>layouts (pie)</li>
            <li>geomapping</li>
            <li>reusable charts</li>
            <li>mobile-friendly</li>
          </ul>
        </section>

        <!-- SVG Intro -->
        <section data-background="#2d323d" class="new-section">
          <h1>svg intro</h1>
        </section>

        <section>
          <h2>svg</h2>
          <pre><code data-trim contenteditable class="language-markup">
            <svg width="500" height="300" class="light-border"></svg>
          </code></pre>
          <svg width="500" height="300" class="light-border tutorial">
            <text x="500" y="290" text-anchor="end">(500, 300)</text>
            <text x="2" y="25" text-anchor="start">(0, 0)</text>
          </svg>
        </section>

        <section>
          <h2>rect</h2>
          <pre><code data-trim contenteditable class="language-markup">
            <rect width="40" height="200" x="230" y="100" fill="#1e8fc6"></rect>
          </code></pre>
          <svg width="500" height="300" class="light-border tutorial">
            <rect width="40" height="200" x="230" y="100" fill="#1e8fc6" />
            <text x="500" y="290" text-anchor="end">(500, 300)</text>
            <text x="2" y="25" text-anchor="start">(0, 0)</text>
          </svg>
        </section>

        <section>
          <h2>circle</h2>
          <pre><code data-trim contenteditable class="language-markup">
            <circle cx="150" cy="100" r="80" fill="#514f73"></circle>
          </code></pre>
          <svg width="500" height="300" class="light-border tutorial">
            <circle cx="250" cy="150" r="60" fill="#514f73" />
            <text x="500" y="290" text-anchor="end">(500, 300)</text>
            <text x="2" y="25" text-anchor="start">(0, 0)</text>
          </svg>
        </section>

        <section>
          <h2>ellipse</h2>
          <pre><code data-trim contenteditable class="language-markup">
            <ellipse cx="250" cy="150" rx="50" ry="10" fill="#cc2309"></ellipse>
          </code></pre>
          <svg width="500" height="300" class="light-border tutorial">
            <ellipse cx="250" cy="150" rx="70" ry="50" fill="#cc2309" />
            <text x="500" y="290" text-anchor="end">(500, 300)</text>
            <text x="2" y="25" text-anchor="start">(0, 0)</text>
          </svg>
        </section>

        <section>
          <h2>text</h2>
          <pre><code data-trim contenteditable class="language-markup">
            <text x="250" y="150" text-anchor="middle">Hello SVG!</text>
          </code></pre>
          <svg width="500" height="300"  class="light-border tutorial">
            <circle cx="250" cy="150" r="10" fill="#514f73" />
            <text x="250" y="150" text-anchor="middle">Hello SVG!</text>
            <text x="500" y="290" text-anchor="end">(500, 300)</text>
            <text x="2" y="25" text-anchor="start">(0, 0)</text>
          </svg>
        </section>

        <section>
          <h2>line</h2>
          <pre><code data-trim contenteditable class="language-markup">
            <line x1="150" y1="200" x2="450" y2="300" stroke-width="9" stroke="#2d323d"></line>
          </code></pre>
          <svg width="500" height="300"  class="light-border tutorial">
            <line x1="100" y1="250" x2="400" y2="100" stroke-width="4" stroke="#2d323d"/>
            <text x="500" y="290" text-anchor="end">(500, 300)</text>
            <text x="2" y="25" text-anchor="start">(0, 0)</text>
          </svg>
        </section>

        <section>
          <h2>polyline</h2>
          <pre><code data-trim contenteditable class="language-markup">
            <polyline points="20,200 110,50 320,200 470,90" stroke="#514f73" stroke-width="5" fill="none"></polyline>
          </code></pre>
          <svg width="500" height="300"  class="light-border tutorial">
            <polyline points="20,200 110,50 320,200 470,90" stroke="#514f73" stroke-width="5" fill="none"/>
            <text x="500" y="290" text-anchor="end">(500, 300)</text>
            <text x="2" y="25" text-anchor="start">(0, 0)</text>
          </svg>
        </section>

        <section>
          <h2>path</h2>
          <pre><code data-trim contenteditable class="language-markup">
            <path d="M 400 100 L 100 200 L 200 100 z" fill="#514f73"></path>
          </code></pre>
          <svg width="500" height="300"  class="light-border tutorial">
            <path d="M 400 100 L 100 200 L 200 100 z" fill="#514f73" />
            <text x="500" y="290" text-anchor="end">(500, 300)</text>
            <text x="2" y="25" text-anchor="start">(0, 0)</text>
          </svg>
        </section>

        <section>
          <h3>check this out too</h3>
          <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial">
            https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial
          </a>
        </section>

        <section>
          <h3>and this</h3>
          <a href="https://docs.google.com/presentation/d/1CNQLbqC0krocy_fZrM5fZ-YmQ2JgEADRh3qR6RbOOGk/pub?start=true&loop=false&delayms=5000#slide=id.p">Leaving Pixels Behind</a>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h1>Selections</h1>
        </section>

        <section>
          <h2>d3.<span class="mediumblue">select</span></h2>
          <pre><code class="language-javascript">d3.select("body").append("p").text("New paragraph!");</code></pre>
          <ul>
            <li>D3 employs <em>chain syntax</em>, you can perform several actions on one line of code</li>
            <li class="fragment">convention: put each method on its own line</li>
          </ul>
          <pre class="fragment"><code class="language-javascript">d3.select("body")
  .append("p")
  .text("New paragraph!");
          </code></pre>
        </section>

        <section>
          <pre><code class="language-javascript">d3.select("body")
  .append("p")
  .text("New paragraph!");</code></pre>
          <ul>
            <li>
              <code>d3</code>: references the d3 object
            </li>
            <li class="fragment">
              <code>.select('body')</code>: pass in CSS selector. Returns a reference to the first element in the DOM that matches
            </li>
            <li class="fragment">
              <code>.append('p')</code>: appends element to a given selection, hands off reference to newly
              created element
            </li>
          </ul>
        </section>

        <section>
          <pre><code class="language-javascript">d3.select("body")
  .append("p")
  .text("New paragraph!");</code></pre>
          <ul>
            <li>
              <code>text()</code> takes a string and inserts it between the opening and closing tags of the
              current selection
            </li>
          </ul>
        </section>

        <section>
          <h2>Chainless</h2>
          <pre><code class="language-javascript">
            var body = d3.select("body");
            var p = body.append("p");
            p.text("New paragraph!");
          </code></pre>
          <p>but....just chain 😀</p>
        </section>

        <section>
          <h2>demo: selections</h2>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h1>Let's talk about <span class="mediumblue">data</span></h1>
        </section>

        <section>
          <h3>Data are <span class="mediumblue">arrays</span></h3>
          <pre><code class="language-javascript">var data = [1, 3, 5, 7, 9];

var browserStats = [
  { "browser":"Chrome", "value": "45" },
  { "browser":"Safari", "value":"12" },
  { "browser":"Firefox", "value":"18" },
  { "browser":"IE", "value":"25" }
];
          </code></pre>
        </section>

        <section>
          <h2>Data <span class="mediumblue">visualization</span> is the process of <span class="mediumblue"><em>mapping</em></span> data to visuals.</h2>
        </section>

        <section>
          <h2>Data Binding</h2>
          <ul>
            <li><em>attaching</em> data to DOM elements</li>
            <li>D3 is very performant in mapping/attaching data, redraws only when needed.</li>
        </section>

        <section>
          <h2>selection.<span class="mediumblue">data()</span></h2>
          <pre><code class="language-javascript">var dataset = [ 5, 10, 15, 20, 25 ];
d3.select('body').selectAll('p')
  .data(dataset)
  .enter()
  .append('p')
  .text('D3 is awesome!'');</code></pre>
          <ul>
            <li><code>d3.select('body')</code>: find DOM element and return reference</li>
            <li class="fragment">
              <code>.selectAll('p')</code>:select all p's in the DOM (empty selection)
            </li>
          </ul>
        </section>

        <section>
          <h2>selection.<span class="mediumblue">data()</span></h2>
          <pre><code class="language-javascript">var dataset = [ 5, 10, 15, 20, 25 ];
d3.select('body').selectAll('p')
  .data(dataset)
  .enter()
  .append('p')
  .text('D3 is awesome!'');</code></pre>
          <ul>
            <li><code>.data(dataset)</code>: counts and parses data values. Everything past this point will
            be executed dataset.length amount of times.</li>
          </ul>
        </section>

        <section>
          <h2>selection.<span class="mediumblue">data()</span></h2>
          <pre><code class="language-javascript">var dataset = [ 5, 10, 15, 20, 25 ];
d3.select('body').selectAll('p')
  .data(dataset)
  .enter()
  .append('p')
  .text('D3 is awesome!'');</code></pre>
          <ul>
            <li><code>.enter()</code>: creates new, data-bound elements and looks at current DOM selection.</li>
            <li>if more data values than DOM elements, enter() creates a new placeholder element</li>
          </ul>
        </section>

        <section>
          <h2>data binding</h2>
          <p>&nbsp;</p>
          <img src="/img/data-binding.png" alt="">
        </section>

        <section>
          <h2>Data Requests</h2>
          <pre><code class="language-javascript">
d3.json("path/to/file.json", function(error, data) {
  if (error) return console.warn(error);
  visualize(data);
});
          </code></pre>
          <p>more methods: <a href="https://github.com/mbostock/d3/wiki/Requests">https://github.com/mbostock/d3/wiki/Requests</a></p>
        </section>

        <section>
          <h2>using your data</h2>
          <pre><code class="language-javascript">
  d3.json('/data/browser.json', function(err, data) {
    d3.select('#data-binding')
      .selectAll('p')
      .data(data)
      .enter()
      .append('p')
        .text(function(d) {
          return d.browser + ' ' + d.value;
        });
  });
          </code></pre>
        </section>

        <section>
          <h2>demo: data binding</h2>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h1>Drawing <span class="mediumblue">SVG</span>s</h1>
        </section>

        <section><h1>Setup</h1></section>

        <section>
          <h4>Boilerplate and Margin Convention</h4>
          <pre><code class="language-javascript">// (1) Select element
var el = d3.select('.timeseries'),
    elWidth = parseInt(el.style('width'), 10),
    elHeight = parseInt(el.style('height'), 10),
    margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = elWidth - margin.left - margin.right,
    height = elHeight - margin.top - margin.bottom;

var svg = el.append("svg")
    .attr("width", elWidth)
    .attr("height", elHeight)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// now in our code we can just reference width and height
          </code></pre>
          <a href="http://bl.ocks.org/mbostock/3019563">http://bl.ocks.org/mbostock/3019563</a>
        </section>

        <section>
          <h3>Data are mapped to <span class="mediumblue">elements</span></h3>
          <pre><code class="language-javascript">
var selection = svg.selectAll('rect')
                  .data(data); // this creates empty placeholders

// appending to the enter selection creates new elements
selection
  .enter()
  .append('rect')
    .attr(/*...*/)
          </code></pre>
        </section>

        <section>
          <h3>We can chain</h3>
          <pre><code class="language-javascript">// create viz
var selection = svg.selectAll('rect')
  .data(data)
  .enter()
  .append('rect')
    .attr('x', function(d,i) { ... })
    .attr('y', function(d,i) { ... })
    .attr('height', function(d,i) { ... })
    .attr('width', function(d,i) { ... })
    .attr('fill', ...)
          </code></pre>
        </section>

        <section>
          <h2>Enter, Update & Exit</h2>
          <p><a href="http://mbostock.github.io/d3/tutorial/circle.html">Three Little Circles</a></p>
          <p><a href="http://bost.ocks.org/mike/join/">Thinking with Joins</a></p>
        </section>

        <section>
          <h2>General Pattern</h2>
          <pre><code class="language-javascript">
//create visualization
var rect = svg.selectAll('rect').data(data);

// transition new data
rect.enter()
  .append('rect')
    .attr(...)

// remove any data not needed
rect.exit().remove();

          </code>
        </section>

        <section>
          <h3>Enter</h3>
          <img src="img/enter.jpg" height="500">
        </section>

        <section>
          <h3>Update</h3>
          <img src="img/update.jpg" height="500">
        </section>

        <section>
          <h3>Exit</h3>
          <img src="img/exit.jpg" height="500">
        </section>

        <section>
          <h4>Things to remember</h4>
          <ol>
            <li>If the new dataset is <span class="mediumblue">smaller</span> than the old one, the surplus elements end up in the exit selection and get removed.</li>
            <li>If the new dataset is <span class="mediumblue">larger</span>, the surplus data ends up in the enter selection and new nodes are added.</li>
            <li>If the new dataset is exactly the <span class="mediumblue">same size</span>, then all the elements are simply updated with new positions, and no elements are added or removed.</li>
          </ol>
          <p>source: <a href="http://bost.ocks.org/mike/join/">Thining With Joins</a></p>
        </section>

        <section>
          <h2>demo: drawing svg and updates</h2>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h1>Transitions</h1>
        </section>

        <section>
          <h2>General Pattern</h2>
          <pre><code class="language-javascript">// (1) initial attributes
var r = svg.selectAll('rect')
  .data(data)
  .enter()
  .append('rect')
    .attr(initialAttrs);

// (2) transition to final state
r.transition()
  .delay(function (d, i){
    return d * 25; // delay each element
  })
  .ease("linear") // also "elastic", "bounce", etc.
  .duration(700) // entire transition
  .attr(finalAttrs);
          </code></pre>
        </section>

        <section>
          <h2>demo: transitions</h2>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h1>Scales</h1>
        </section>

        <section>
          <h1>d3.<span class="span mediumblue">scale</span></h1>
        </section>

        <section>
          <blockquote>Scales are functions that map from an input domain to an output range</blockquote>
          <p>- <a href="https://github.com/mbostock/d3/wiki/Quantitative-Scales">Mike Bostock's definition</a></p>
          <ul>
            <li class="fragment">The values in any dataset are unlikely to correspond exactly to pixel measurements for use in your visualization.</li>
            <li class="fragment">Scales provide a convenient way to map those data values to new values useful for visualization purposes.</li>
          </ul>
        </section>

        <section>
          <h2>Domains and Ranges</h2>
          <ul>
            <li>input domain: range of possible input values (usually min and max values of dataset)</li>
            <li>output range: range of possible output values (pixel units)</li>
            <li>input --> domain</li>
            <li>output --> range</li>
          </ul>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h2>Some useful <div class="mediumblue">D3</div> functions</h2>
        </section>

        <section>
          <h2>d3.<span class="mediumblue">max</span></h2>
          <pre><code class="language-javascript">
var values = [2, 10, 3];
var max = d3.max(values); // 10

// if array of objects...
var maxRepoCount = d3.max(data, function (d) {
  return d.value;
});
          </code></pre>
        </section>

        <section>
          <h2>d3.<span class="mediumblue">extent</span></h2>
          <pre><code class="language-javascript">
var values = [3, 1, 5, 8, 9, 2];

var max = d3.extent(values); // [1, 9]
          </code></pre>
        </section>

        <section>
          <h2>Domains and Ranges</h2>
          <img src="/img/scales.png" alt="">
        </section>

        <section>
          <h2>d3.<span class="mediumblue">scale</span> (linear, time)</h2>
          <pre><code class="language-javascript">
var y = d3.scale.linear()
  .range([height, 0])
  .domain(d3.extent(data, function(d) { return d.value; }));

// A scale method for date and time values, with special handling of ticks for dates.
var x = d3.time.scale()
        .range([0, width])
        .domain(d3.extent(data, function(d) { return d.date; }));
          </code></pre>
        </section>

        <section>
          <h2>d3.<span class="mediumblue">scale</span> (ordinal)</h2>
          <pre><code class="language-javascript">
var heightScale = d3.scale.linear()
  .domain([0, d3.max(data, function (d) { return d.value})])
  .range([height, 0]);

// ordinal scales for discrete data
var xScale = d3.scale.ordinal()
  .domain(data.map(function (d) { return d.category; }))
  .rangeRoundBands([0, width], 0.1); // useful for barcharts
          </code></pre>
        </section>

        <section>
          <h2>Docs</h2>
          <ul>
            <li><a href="https://github.com/mbostock/d3/wiki/Quantitative-Scales#linear">Linear Scales</a></li>
            <li><a href="https://github.com/mbostock/d3/wiki/Ordinal-Scales">Ordinal Scales</a></li>
        </section>

        <section>
             <h3>Example: Use scales for rect's attr</h3>
             <pre><code class="language-javascript">selection
  .attr('x', function (d, i) {
    return xScale(d.lang)
  }),
  .attr('y', function (d, i) {
    return yScale(d.value);
  }),
  .attr('height', function (d) {
    return height - yScale(d.value);
  }),
  .attr('width', xScale.rangeBand());</code></pre>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h1>Axis</h1>
        </section>

        <section>
          <h2>d3.<span class="mediumblue">svg.axis</span></h2>
          <pre><code class="language-javascript">
// create axis
var xAxis = d3.svg.axis()
    .scale(x)
    .tickFormat(d3.time.format('%m/%d')) // formatting for ticks
    .ticks(d3.time.day, 3) // manually specify ticks
    .orient("bottom"); // place label below tick

svg.append("g")
  .attr("class", "x axis")
  .attr("transform", "translate(0," + height + ")")
  .call(xAxis);
          </code></pre>
        </section>

        <section>
          <h2>useful styling for axis</h2>
          <pre><code class="language-css">.axis path,
.axis line {
  fill: none;
  stroke: #282F35;
  stroke-width: 1px;
  shape-rendering: crispEdges;
}

.axis .tick {
  fill: #DAE0E4;
  font-size: 12px;
}</code></pre>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h1>Tooltips</h1>
        </section>

        <section>
          <h3>selection.<span class="mediumblue">on(type, listener)</span></h2>
          <pre><code class="language-javascript">
var r = svg.selectAll('rect')
  .data(data)
  .enter()
  .append('rect')
    .attr(...)
    .on('mouseover', handleMouseover);

function handleMouseover(d, i) {
  // this: element moused over
  // d: datum
  // i: index
}
          </code></pre>
        </section>

        <section>
          <h3>tooltip.css</h3>
          <pre><code class="language-css">
.tooltip {
  visibility: hidden;
  background-color: #39393d;
}

.tooltip text {
  fill: #fff;
  font-size: 12px;
  shape-rendering: crispEdges;
}
          </code></pre>
        </section>

        <section>
          <h3>add tooltip to svg</h3>
          <pre><code class="language-javascript">
var tooltip = svg.append('g').attr('class', 'tooltip');

tooltip.append('rect').attr('height', '30').attr('width', '100');

tooltip.append('text').attr('x', 10).attr('y', 20); // relative to group element
          </code></pre>
        </section>


        <section>
          <h3>event handlers</h3>
          <pre><code class="language-javascript">
function handleMouseover(d, i) {
  // calculate x, y (add code to check for boundaries)
  var pos = { x: xScale(d.lang), y: yScale(d.value) - 35};

  var tooltip = svg.select('.tooltip')
    .attr('transform': 'translate(' + [pos.x, pos.y] + ')');

  tooltip.select('text').text('Repos: ' + d.value);

  tooltip.style('visibility', 'visible');
}

function handleMouseout(d, i) {
  svg.select('.tooltip').style('visibility', 'hidden')
}
          </code></pre>
        </section>

        <section>
          <h2>d3.tip.js</h2>
          <p style="text-align:left;">Awesome tooltip lib: <a href="https://github.com/Caged/d3-tip">https://github.com/Caged/d3-tip</a></p>
        </section>

        <section>
          <h2>demo: Interactivity</h2>
        </section>

        <section><h2><a href="http://victormejia.me/d3-angular-demos/#/bar" target="_blank">tooltip demo </a></h2></section>

        <section><h2><a href="http://victormejia.me/d3-angular-demos/#/line" target="_blank">tooltip demo 2 </a></h2></section>

        <section data-background="#2d323d" class="new-section">
          <h1>Layouts</h1>
        </section>

        <section>
          <h2>D3 Layouts</h2>
          <ul>
            <li>Layouts don't <em>layout </em> anything for you</li>
            <li>take data that you provide and remap or otherwise transform it</li>
            <li>Layouts: Bundle, Chord, Histogram, Force, Stack, <strong>Pie</strong></li>
          </ul>
        </section>

        <section>
          <h2>d3.<span class="mediumblue">layout.pie()</span></h2>
          <p>take your data and calculate all those messy angles for you (in radians)</p>
          <ul>
            <li>Circle = 360 degrees = 2</li>
          </ul>
        </section>

        <section>
          <img src="/img/piefunc.png" alt="">
        </section>

        <section>
          <h2>d3.<span class="mediumblue">svg.arc()</span></h2>
          <p>function for drawing arcs as SVG path elements</p>
          <pre><code class="language-javascript">// pie!
var pie = d3.layout.pie()
  .value(function(d) {
    return d.value;
  });

var radius = Math.min(width, height) / 2;

var arc = d3.svg.arc()
  .innerRadius(radius)
  .outerRadius(radius * 0.6);
          </code></pre>
        </section>

        <section>
          <pre><code class="language-javascript">
// set up the arcs
var arcs = svg.selectAll(".arc")
  .data(pie(data))
  .enter().append("g")
  .attr("class", "arc");

// within each new g, we append a path
arcs.append("path")
  .attr("fill", function(d, i) {
    return color(i);
  })
  .attr("d", arc);
          </code></pre>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h1>Geomapping</h1>
        </section>

        <section>
          <h2>GeoJSON</h2>
          <ul>
            <li>a very specific use of JSON</li>
            <li>to generate a geographic map, need path data</li>
            <li><a href="https://raw.githubusercontent.com/alignedleft/d3-book/master/chapter_12/us-states.json">us-states.json</a></li>
          </ul>
        </section>

        <section>
          <h2>GeoJSON</h2>
          <img src="/img/geojson.png" height="500" alt="">
        </section>

        <section>
          <h2>GeoJSON</h2>
          <ul>
            <li>under "geometry" field, has coordinates that make up the boundaries</li>
            <li>GeoJSON is lon/lat vs. lat/lon</li>
            <li>lon/lat can easily be converted to x/y values for display</li>
            <li>Double-check coordinate values: <a href="http://teczno.com/squares">Get Lat+Lon</a></li>
          </ul>
        </section>

        <section>
          <h1>Paths</h1>
        </section>

        <section>
          <h2>Paths</h2>
          <pre><code class="language-javascript">
var path = d3.geo.path();
          </code></pre>
          <ul>
            <li>does the dirty work of translating GeoJSON coordinates into SVG path values.</li>
          </ul>
        </section>

        <section>
          <h2>generate path</h2>
          <pre><code class="language-javascript">
var path = d3.geo.path();

svg.selectAll("path")
  .data(data.features)
  .enter()
  .append("path")
  .attr("d", path);
          </code></pre>
        </section>

        <section>
          <h4>not quite there...</h4>
          <img src="/img/initialmap.png" alt="">
        </section>

        <section>
          <h1>Projections</h1>
        </section>

        <section>
          <h3>Projections</h3>
          <pre><code class="language-javascript">var projection = d3.geo.albersUsa()
                    .translate([width/2, height/2])
                    .scale([1200]); // default is 1000</code></pre>
          <ul>
            <li>translate that which is in 3D space to 2D space</li>
            <li>d3 has several built-in projections</li>
            <li>Albers USA nicely tucks Alaska and Hawaii beneath the Southwest</li>
            <li>albersUsa is default, but good to specify to customize</li>
          </ul>
        </section>

        <section>
          <h3>Projections</h3>
          <pre><code class="language-javascript">var projection = d3.geo.albersUsa()
                    .translate([width/2, height/2])
                    .scale([1200]); // default is 1000

var path = d3.geo.path()
    .projection(projection);</code></pre>
          </code></pre>
          <p>then add the path</p>
          <pre><code class="language-javascript">svg.selectAll("path")
  .data(data.features).enter().append("path")
  .attr("d", path)
  .style("fill", "#6c798c")
  .style('stroke', '#8893A4')</code></pre>
        </section>

        <section>
          <h3>Nice looking map :)</h3>
          <img src="/img/geomap.png" alt="">
        </section>

        <section>
          <h1>Adding Points</h1>
        </section>

        <section>
          <h2>View Data</h2>
          <p>you can use <a href="http://www.teczno.com/squares/">http://www.teczno.com/squares/</a> to geocode</p>
          <pre><code>
            rank,place,views,lat,lon
            1,NewYork,81751,40.71455,-74.007124
            2,LosAngeles,37926,34.05349,-118.245323
            3,Chicago,2695,45.37399,-92.888759
            4,Houston,20994,41.337462,-75.733627
            5,Philadelphia,15260,37.15477,-94.486114
          </code></pre>
        </section>

        <section>
          <h2>Use projection</h2>
          <pre><code class="language-javascript">
svg.selectAll("circle")
  .data(data)
  .enter()
  .append("circle")
  .style("fill", "#59A2F0")
  .attr("cx", function(d) {
    return projection([d.lon, d.lat])[0];
  })
  .attr("cy", function(d) {
    return projection([d.lon, d.lat])[1];
  })
  .attr("r", function(d) {
    return Math.sqrt(parseInt(d.views) * 0.008);
  })
  .style("opacity", 0.75);
          </code></pre>
        </section>

        <section>
          <h3>Points and d3.tip.js</h3>
          <img src="/img/geomap-points.png" alt="">
        </section>

        <section>
          <h2>check out <a href="http://datamaps.github.io/">http://datamaps.github.io/</a></h2>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h2>Responsive Charts</h2>
        </section>

        <section>
          <h3>quick way (works for the most part, "zooming in and out")</h3>
          <pre><code class="language-javascript">
var svg = el.append("svg")
  .attr("width", "100%")
  .attr("height", "100%")
  .attr("viewBox", "0 0 " + elWidth + " " + elHeight )
  .attr("preserveAspectRatio", "xMidYMid meet")
          </code></pre>
        </section>

        <section>
          <h3>window.onresize</h3>
          <ul>
            <li>add listener, then update all items related to width</li>
            <li>update svg width</li>
            <li>scale, axis</li>
            <li>redraw vis</li>
          </ul>
          <a href="https://github.com/victormejia/d3-angular-demos/blob/master/app%2Fscripts%2Fdirectives%2Fbarchart.directive.js#L104">Example (Angular)</a>
        </section>

        <section data-background="#2d323d" class="new-section">
          <h2>Reusable Charts</h2>
        </section>

        <section>
          <h2>we can use prototypes</h2>
          <pre><code class="language-javascript">
var PieChart = (function () {
    function PieChart(el, data) {
        this.el = el;
        this.data = data;
        this.render();
    }
    PieChart.prototype.render = function () {
        ...
    };
    return PieChart;
})();

// usage
var vis = new PieChart('.browser-breakdown', data);
          </code></pre>
        </section>

        <section>
          <h1>Some extra <a href="https://gist.github.com/victormejia/c076c4d2519e5f58a319">Resources</a></h1>
        </section>

        <section>
          <h2>Thanks!</h2> 👊
        </section>

      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="plugin/prism/prism.js"></script>
    <script src="js/reveal.min.js"></script>
    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

      // open links in new tab
      var links = document.querySelectorAll('a');
      for (var i = 0; i < links.length; i++) {
        links[i].setAttribute('target', '_blank');
      };
    </script>

  </body>
</html>
